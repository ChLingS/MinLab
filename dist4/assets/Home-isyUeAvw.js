import{r as x,o as D,_,c as Y,a as m,b as g,d as r,F as A,e as E,f as l,u as c,g as k,t as C,h as b,w as d,i as N,j as X,n as T}from"./index-CAWSItqW.js";import{c as I}from"./card-CDcbBfVL.js";function B(){const t=x([]);return D(async()=>{try{const n=await fetch("/liveData.json");if(!n.ok)throw new Error("Network response was not ok");const s=await n.json();t.value=s}catch(n){console.error("Error fetching papers:",n)}}),{papers:t}}const L={class:"centered-list"},F={key:0,class:"load-more"},H={__name:"live",setup(t){const{papers:e}=B(),n=x(10),s=Y(()=>e.value.slice(0,n.value)),i=()=>{n.value+=10};return(o,u)=>(m(),g("div",null,[u[0]||(u[0]=r("div",{class:"title"},[r("h2",null,"动态"),r("div",{style:{width:"80%",height:"2px","background-color":"#ccc",margin:"20px auto 0","border-radius":"1px"}})],-1)),r("ul",L,[(m(!0),g(A,null,E(s.value,(a,h)=>(m(),g("li",{key:h,class:"centered-item"},[l(I,{title:a.title,description:a.abstract,imageUrl:a.image_url,date:a.date},null,8,["title","description","imageUrl","date"])]))),128))]),c(e).length>s.value.length?(m(),g("div",F,[r("button",{onClick:i,class:"arrow-button"},"⬇️")])):k("",!0)]))}},R=_(H,[["__scopeId","data-v-c75244ec"]]),j={class:"date"},O={__name:"getTime",setup(t){const e=x(""),n=()=>{const s=new Date,i={hour:"2-digit",minute:"2-digit"};e.value=s.toLocaleDateString("zh-CN",i)};return D(()=>{n(),setInterval(n,6e4)}),(s,i)=>(m(),g("div",j,[r("span",null,C(e.value),1)]))}},W=_(O,[["__scopeId","data-v-45da18be"]]),q="/assets/back-NA2fG_LB.jpg";var V={props:{type:{type:String,default:"translate"},transformOrigin:{type:String,default:"center"},originX:{type:Number,default:50},originY:{type:Number,default:50},strength:{type:Number,default:10},audioIndex:{type:Number,default:50},axis:{type:String,default:null},maxX:{type:Number,default:null},maxY:{type:Number,default:null},minX:{type:Number,default:null},minY:{type:Number,default:null},cycle:{type:Number,default:0}},methods:{strengthManager(){return this.type==="depth"||this.type==="depth_inv"?Math.abs(this.strength):this.strength}}};function z(t){return t.bottom>=0&&t.right>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}function U(t,e,n){let s,i;return function(){const o=this;let u;n==="scroll"?u=e:u=o.duration>1e3?e:o.duration/10;const a=+new Date,h=arguments;s&&a<s+u?(clearTimeout(i),i=setTimeout(()=>{requestAnimationFrame(()=>{s=a,t.apply(o,h)})},u)):requestAnimationFrame(()=>{s=a,t.apply(o,h)})}}var G={props:{active:{type:Boolean,default:!0},duration:{type:Number,default:1e3},easing:{type:String,default:"cubic-bezier(0.23, 1, 0.32, 1)"},tag:{type:String,default:"div"}}},K={props:{perspective:{type:Number,default:1e3}},computed:{style(){return{perspective:`${this.perspective}px`}}}},J={props:{audio:{type:String,required:!1},playAudio:{type:Boolean,default:!1}},data(){return{analyser:null,audioArray:null,audioData:null,audioRef:null,wasPlayed:!1,isPlaying:!1}},watch:{audio(){this.wasPlayed=!1,this.isPlaying=!1},playAudio(t){t?this.play():this.stop()}},methods:{play(){this.active&&(this.wasPlayed||(this.handleAudio(),this.wasPlayed=!0),this.isPlaying=!0,this.audioRef.play(),this.getSongData())},stop(){this.isPlaying=!1,this.audioRef.pause()},handleAudio(){const{audio:t}=this.$refs;this.audioRef=t;const e=new AudioContext,n=e.createMediaElementSource(t),s=e.createAnalyser();n.connect(s),s.connect(e.destination),s.fftSize=256;const i=s.frequencyBinCount,o=new Uint8Array(i);this.audioArray=o,this.analyser=s},getSongData(){this.isPlaying&&(this.analyser.getByteFrequencyData(this.audioArray),this.audioData=new Array(this.audioArray),requestAnimationFrame(this.getSongData))}}};function w(){try{return/Mobi|Android/i.test(navigator.userAgent)}catch{return!0}}var Q={props:{event:{type:String,default:"move"}},data(){return{eventMap:{orientation:"deviceorientation",scroll:"scroll",move:w()?"deviceorientation":null}}},methods:{addEvents(){this.eventMap[this.event]&&window.addEventListener(this.eventMap[this.event],this.handleMovement,!0)},removeEvents(){this.eventMap[this.event]&&window.removeEventListener(this.eventMap[this.event],this.handleMovement,!0)}},watch:{event(t,e){this.eventMap[t]&&window.addEventListener(this.eventMap[t],this.handleMovement,!0),this.eventMap[e]&&window.addEventListener(this.eventMap[e],this.handleMovement,!0)}}};function y(t,e){return{x:t,y:e}}function Z(t){return y(t?t.width/2:0,t?t.height/2:0)}function tt(t){const{target:e,event:n}=t,s=n.clientX,i=n.clientY,o=s-e.left,u=i-e.top,a=Z(e),h=o/a.x,v=u/a.y;return{...y(h,v),target:e}}function et(t){const{event:e,target:n}=t,s=e.gamma/45,i=e.beta/90;return{...y(s,i),target:n}}function nt(t){const e=(t.left-window.innerWidth)/(t.width+window.innerWidth),n=(t.top-window.innerHeight)/(t.height+window.innerHeight);return{...y(e,n),target:t}}var f={name:"KinesisContainer",mixins:[G,K,J,Q],provide(){const t={};return["audioData","duration","easing","event","eventData","isMoving","movement","shape"].forEach(n=>Object.defineProperty(t,n,{enumerable:!0,get:()=>this[n]})),{context:t}},data(){return{movement:{x:0,y:0},isMoving:!1,shape:null,leftOnce:!1,eventData:{x:0,y:0}}},mounted(){this.addEvents()},beforeUnmount(){this.removeEvents()},methods:{handleMovement:U(function(t){if(!this.active)return;!this.isMoving&&!this.leftOnce&&(this.isMoving=!0),this.shape=this.$el.getBoundingClientRect();const e=z(this.shape);this.event==="move"&&this.isMoving&&!w()?(this.movement=tt({target:this.shape,event:t}),this.eventData=y(t.clientX,t.clientY)):(this.event==="orientation"||this.event==="move"&&w())&&e?this.movement=et({target:this.shape,event:t}):this.event==="scroll"&&e&&this.shape.height&&(this.movement=nt(this.shape))},100),handleMovementStart(){this.active&&(this.isMoving=!0)},handleMovementStop(){this.active&&(this.leftOnce=!0,this.isMoving=!1)}}};function it(t,e,n,s,i,o){return m(),b(X(t.tag),{onMousemove:o.handleMovement,onMouseenter:o.handleMovementStart,onMouseleave:o.handleMovementStop,style:t.style},{default:d(()=>[N(t.$slots,"default"),t.audio?(m(),b("audio",{key:0,type:"audio/mpeg",onEnded:e[1]||(e[1]=(...u)=>t.stop&&t.stop(...u)),ref:"audio"},[l("source",{src:t.audio},null,8,["src"])],544)):k("",!0)]),_:3},8,["onMousemove","onMouseenter","onMouseleave","style"])}f.render=it;var st={methods:{transformSwitch(t,e,n,s){let i;switch(t){case"translate":i=this.translateMovement(e,n);break;case"rotate":i=this.rotateMovement(e,n);break;case"depth":i=this.depthMovement(e,n,s);break;case"depth_inv":i=this.depthMovement(-e,-n,s);break;case"scale":i=this.scaleMovement(e,n);break}return i},translateMovement(t,e){return`translate3d(${-t}px, ${-e}px, 0)`},rotateMovement(t,e){let n;return this.axis?this.axis==="x"?n=2*t:this.axis==="y"&&(n=2*e):n=t+e,`rotate3d(0,0,1,${n}deg)`},depthMovement(t,e,n){return`rotateX(${-e}deg) rotateY(${t}deg) translate3d(0,0,${n*2}px)`},scaleMovement(t,e){const{type:n}=this,s=Math.sign(this.strength)*(Math.abs(t)+Math.abs(e))/10+1;return`scale3d(${n==="scaleX"||n==="scale"?s:1},
            ${n==="scaleY"||n==="scale"?s:1},
            1)`}}};function S(t){const{y:e,x:n,target:s,originX:i=50,strength:o=10,event:u=null}=t;let{originY:a=50}=t;u==="scroll"&&(a=-a/2);const h=(n-i/50)*o,v=(e-a/50)*o;return{...y(h,v),target:s}}function P(t,e,n){return n&&t>n?n:e&&t<e?e:t}function $(t){const{referencePosition:e,elementPosition:n,spanningRange:s,cycles:i}=t,o=(e-n)*(Math.PI*2)/s;return s*Math.sin(o*i)/(s/2)}var p={name:"KinesisElement",mixins:[V,st],inject:["context"],props:{tag:{type:String,default:"div"}},computed:{transform(){return this.transformMovement()},getContext(){return this.context},transformParameters(){return{transitionProperty:"transform",transitionDuration:this.transitionDuration,transformOrigin:this.transformOrigin,transitionTimingFunction:this.transitionTimingFunction}},transitionDuration(){const{duration:t}=this.context;return`${t}ms`},transitionTimingFunction(){return this.context.easing},isTouch(){return w()}},methods:{transformMovement(){const{context:t}=this;if(!t.isMoving&&t.event==="move")return{};let e,n;const s=t.event,i=this.strengthManager();if(this.cycle<=0){const{x:a,y:h}=S({...t.movement,originX:this.originX,originY:this.originY,strength:i}),v=s==="scroll";if(v||(e=this.axis==="y"?0:P(a,this.minX,this.maxX),n=this.axis==="x"?0:P(h,this.minY,this.maxY)),v){const M=S({x:t.movement.x,y:t.movement.y,originX:this.originX,originY:this.originY,strength:i,event:t.event}).y;e=this.axis==="x"?M:0,n=this.axis==="y"||!this.axis?M:0}}else if(this.cycle>0){const{shape:a,eventData:h}=t;if(a){const v=this.axis==="x"?$({referencePosition:s==="scroll"?0:h.x,elementPosition:a.left,spanningRange:s==="scroll"?window.innerWidth:a.width,cycles:this.cycle}):0,M=this.axis==="y"||!this.axis?$({referencePosition:s==="scroll"?0:h.y,elementPosition:a.top,spanningRange:s==="scroll"?window.innerHeight:a.height,cycles:this.cycle}):0;e=v*i,n=M*i}}let o=this.type;return o=o==="scaleX"||o==="scaleY"?"scale":o,{transform:this.transformSwitch(o,e,n,this.strength)}}}};function ot(t,e,n,s,i,o){return m(),b(X(n.tag),{style:{...o.transform,...o.transformParameters}},{default:d(()=>[N(t.$slots,"default")]),_:3},8,["style"])}p.render=ot;const rt={class:"container"},at={class:"content"},lt={style:{display:"flex",gap:"0.5rem","align-items":"center","justify-content":"center"}},ut={class:"date"},ct={__name:"Home",setup(t){const e=x(null),n=()=>{e.value.scrollIntoView({behavior:"smooth"})};return(s,i)=>(m(),g("div",rt,[r("figure",{style:T({backgroundImage:`url(${c(q)})`}),class:"background-image"},[r("div",at,[r("div",lt,[l(c(f),null,{default:d(()=>[l(c(p),{strength:10},{default:d(()=>i[0]||(i[0]=[r("h1",null,"M",-1)])),_:1})]),_:1}),l(c(f),null,{default:d(()=>[l(c(p),{strength:10},{default:d(()=>i[1]||(i[1]=[r("h1",null,"i",-1)])),_:1})]),_:1}),l(c(f),null,{default:d(()=>[l(c(p),{strength:10},{default:d(()=>i[2]||(i[2]=[r("h1",null,"n",-1)])),_:1})]),_:1}),l(c(f),null,{default:d(()=>[l(c(p),{strength:10},{default:d(()=>i[3]||(i[3]=[r("h1",null,"L",-1)])),_:1})]),_:1}),l(c(f),null,{default:d(()=>[l(c(p),{strength:10},{default:d(()=>i[4]||(i[4]=[r("h1",null,"a",-1)])),_:1})]),_:1}),l(c(f),null,{default:d(()=>[l(c(p),{strength:10},{default:d(()=>i[5]||(i[5]=[r("h1",null,"b",-1)])),_:1})]),_:1})]),i[6]||(i[6]=r("div",{style:{"font-family":"SourceHanSerifCN","font-size":"1.1rem"}},[r("span",{style:{"font-family":"'NovecentoSansWide', sans-serif"}},"MinLab"),r("span",null,"是一个江西师范大学地理与环境学院的"),r("span",{style:{"font-family":"'NovecentoSansWide', sans-serif"}},"GIS"),r("span",null,"研究团队")],-1))]),r("div",{class:"arrow-container"},[r("div",{class:"arrow",onClick:n})]),r("div",ut,[l(W)])],4),r("div",{class:"target",ref_key:"targetSection",ref:e},null,512),l(R)]))}},mt=_(ct,[["__scopeId","data-v-75ad4ada"]]);export{mt as default};
